<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyFluff - Furby Connect Control</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <!-- Top Status Bar -->
        <header class="top-bar">
            <div class="logo-section">
                <img src="/static/images/pyfluff.svg" alt="PyFluff" class="logo">
                <h1>PyFluff</h1>
            </div>
            <div class="status">
                <span id="status-indicator" class="status-indicator"></span>
                <span id="status-text">Checking...</span>
            </div>
            <div class="connection-controls">
                <select id="known-furbies" class="furby-select" title="Select a known Furby">
                    <option value="">Select known Furby...</option>
                </select>
                <input type="text" id="mac-address" placeholder="MAC Address (optional)" class="mac-input" title="Enter MAC address to connect directly (useful for F2F mode)">
                <button id="btn-connect" class="btn btn-primary btn-sm">Connect</button>
                <button id="btn-disconnect" class="btn btn-secondary btn-sm">Disconnect</button>
            </div>
        </header>

        <main class="main-grid">
            <!-- Left Column -->
            <div class="left-column">

                <!-- Antenna Color -->
                <section class="card card-compact">
                    <h2>Antenna Color</h2>
                    <div class="color-controls-wrapper">
                        <div class="color-controls">
                            <div class="slider-group">
                                <label for="red-slider">Red</label>
                                <input type="range" id="red-slider" min="0" max="255" value="255">
                                <span id="red-value">255</span>
                            </div>
                            <div class="slider-group">
                                <label for="green-slider">Green</label>
                                <input type="range" id="green-slider" min="0" max="255" value="0">
                                <span id="green-value">0</span>
                            </div>
                            <div class="slider-group">
                                <label for="blue-slider">Blue</label>
                                <input type="range" id="blue-slider" min="0" max="255" value="0">
                                <span id="blue-value">0</span>
                            </div>
                        </div>
                        <div id="color-preview" style="background: rgb(255, 0, 0);" title="Click to resend"></div>
                    </div>
                    <div class="preset-colors">
                        <button class="color-preset" data-color="255,0,0" style="background: red;"></button>
                        <button class="color-preset" data-color="0,255,0" style="background: green;"></button>
                        <button class="color-preset" data-color="0,0,255" style="background: blue;"></button>
                        <button class="color-preset" data-color="255,255,0" style="background: yellow;"></button>
                        <button class="color-preset" data-color="255,0,255" style="background: magenta;"></button>
                        <button class="color-preset" data-color="0,255,255" style="background: cyan;"></button>
                        <button class="color-preset" data-color="255,255,255" style="background: white; border: 2px solid #ddd;"></button>
                        <button class="color-preset color-memory" data-slot="0" style="background: rgb(128,128,128);"></button>
                        <button class="color-preset color-memory" data-slot="1" style="background: rgb(128,128,128);"></button>
                        <button class="color-preset color-memory" data-slot="2" style="background: rgb(128,128,128);"></button>
                        <button class="color-preset color-memory" data-slot="3" style="background: rgb(128,128,128);"></button>
                        <button class="color-preset color-memory" data-slot="4" style="background: rgb(128,128,128);"></button>
                        <button class="color-preset" data-color="0,0,0" style="background: black;"></button>
                    </div>
                </section>

                <!-- Mood Control -->
                <section class="card card-compact">
                    <h2>Mood</h2>
                    <div class="mood-controls">
                        <div class="slider-group">
                            <label for="mood-excitedness">Excited</label>
                            <input type="range" id="mood-excitedness" class="mood-slider" data-mood="excitedness" min="0" max="100" value="50">
                            <span id="excitedness-value">50</span>
                        </div>
                        <div class="slider-group">
                            <label for="mood-displeasedness">Displeased</label>
                            <input type="range" id="mood-displeasedness" class="mood-slider" data-mood="displeasedness" min="0" max="100" value="0">
                            <span id="displeasedness-value">0</span>
                        </div>
                        <div class="slider-group">
                            <label for="mood-tiredness">Tired</label>
                            <input type="range" id="mood-tiredness" class="mood-slider" data-mood="tiredness" min="0" max="100" value="0">
                            <span id="tiredness-value">0</span>
                        </div>
                        <div class="slider-group">
                            <label for="mood-fullness">Full</label>
                            <input type="range" id="mood-fullness" class="mood-slider" data-mood="fullness" min="0" max="100" value="50">
                            <span id="fullness-value">50</span>
                        </div>
                        <div class="slider-group">
                            <label for="mood-wellness">Wellness</label>
                            <input type="range" id="mood-wellness" class="mood-slider" data-mood="wellness" min="0" max="100" value="50">
                            <span id="wellness-value">50</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Column -->
            <div class="right-column">
                <!-- Actions -->
                <section class="card card-compact">
                    <h2>Actions</h2>
                    <div class="button-grid-compact">
                        <button class="btn btn-action btn-sm" data-action="24,2,1,6">Hello</button>
                        <button class="btn btn-action btn-sm" data-action="55,2,14,0">Giggle</button>
                        <button class="btn btn-action btn-sm" data-action="7,0,1,0">Wait</button>
                        <button id="btn-lcd-on" class="btn btn-action btn-sm">LCD On</button>
                        <button id="btn-lcd-off" class="btn btn-action btn-sm">LCD Off</button>
                        <button id="btn-debug" class="btn btn-action btn-sm">Debug</button>
                    </div>
                    
                    <div class="action-helper">
                        <label for="action-search">Search</label>
                        <input type="text" id="action-search" placeholder="Search actions..." autocomplete="off">
                        <div id="action-dropdown" class="action-dropdown hidden">
                            <div id="action-list" class="action-list"></div>
                            <div id="recent-actions" class="recent-actions"></div>
                        </div>
                    </div>
                    <div class="action-coords">
                        <input type="number" id="action-input" min="0" max="255" value="55" placeholder="Input">
                        <input type="number" id="action-index" min="0" max="255" value="2" placeholder="Index">
                        <input type="number" id="action-subindex" min="0" max="255" value="14" placeholder="Sub">
                        <input type="number" id="action-specific" min="0" max="255" value="0" placeholder="Spec">
                        <button id="btn-custom-action" class="btn btn-primary btn-sm">Trigger</button>
                    </div>
                    <div id="action-description" class="action-description"></div>
                </section>

                <!-- Name Selection -->
                <section class="card card-compact">
                    <h2>Furby Name</h2>
                    <div class="name-selection-inline">
                        <input type="text" id="name-search" placeholder="Search or type name..." autocomplete="off">
                        <input type="number" id="name-id" min="0" max="128" value="0" readonly title="Name ID">
                        <button id="btn-set-name" class="btn btn-primary btn-sm">Set</button>
                        <div id="name-dropdown" class="action-dropdown hidden">
                            <div id="name-list" class="action-list"></div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Furby Songs Section -->
            <section class="card card-compact card-full-width">
                <h2>ðŸŽµ Furby Songs</h2>
                <p class="song-description">Make Furby sing! Select from all available songs and musical actions.</p>
                <div class="songs-controls">
                    <button id="btn-random-song" class="btn btn-primary">Play Random Song</button>
                    <select id="song-selector" class="song-selector">
                        <option value="">Select a song...</option>
                    </select>
                    <button id="btn-play-song" class="btn btn-secondary">Play Selected</button>
                </div>
                <div id="song-display" class="song-display">
                    <div class="song-info" id="song-info">Select a song to play!</div>
                </div>
            </section>

            <!-- Log -->
            <section class="card card-compact card-full-width">
                <h2>Log</h2>
                <div id="log" class="log"></div>
            </section>
        </main>
    </div>

    <script id="action-data" type="application/json">[]</script>
    <script src="/static/actions.js"></script>
    <script src="/static/names.js"></script>
    <script src="/static/songs.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
